<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous" />

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
    integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA=="
    crossorigin="anonymous" />

  <!-- Style CSS -->
  <link rel="stylesheet" href="/style.css" />

  <!-- Toggle CSS -->
  <link href="https://cdn.jsdelivr.net/gh/gitbrent/bootstrap4-toggle@3.6.1/css/bootstrap4-toggle.min.css"
    rel="stylesheet" />
  <title>Pendaur & Pemilah Sampah Otomatis</title>
</head>

<body>
  <div class="container">
    <div class="home">
      <h1>Mesin Pendaur & Pemilah Sampah Otimatis</h1>
      <img src="/img/waste.png" class="icon-img waste" alt="waste" />
      <img src="/img/garbage.png" class="icon-img garbage" alt="garbage" />
      <i class="fa fa-angle-double-right"></i>
      <i class="fa fa-angle-double-right"></i>
      <i class="fa fa-angle-double-right"></i>
      <button class="btn btn-success start">
        <i class="fa fa-sign-in-alt mr-2"></i> Mulai
      </button>
    </div>

    <div class="trash-type">
      <h1>Pilih Jenis Sampah</h1>
      <div class="row">
        <div class="col-md-4">
          <img src="/img/organic (1).png" alt="organic">
          <h2>Sampah Organic</h2>
        </div>
        <div class="col-md-4">
          <input type="checkbox" data-toggle="toggle" data-size="lg"
            data-on="<i class='fa fa-angle-double-right'></i> <i class='fa fa-angle-double-right'></i> <i class='fa fa-angle-double-right'></i> "
            data-off=" <i class='fa fa-angle-double-left'></i><i class='fa fa-angle-double-left'></i><i class='fa fa-angle-double-left'></i>"
            data-onstyle="warning" data-offstyle="primary" class="toggler" name="status" />
        </div>
        <div class="col-md-4">
          <img src="/img/mmetal.png" alt="non-organic">
          <h2>Sampah Non-Organic</h2>

        </div>
      </div>
      <button class="btn btn-secondary back">
        <i class="fa fa-backward mr-2"></i> Kembali
      </button>
      <button class="btn btn-success next">
        <i class="fa fa-sign-in-alt mr-2"></i> Lanjut
      </button>
    </div>


    <div class="organic">
      <h1>Sampah Non-Organik</h1>
      <img src="" alt="trash-type" class="img-type" width="200px">
      <h2>Tekan mulai untuk memilah sampah secara otomatis</h2>
      <div class="loader-wrapper">
        <div class="loader my-3 text-success">
          <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>
          <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>
          <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>
        </div>
        <div class="progress">
          <div class="progress-bar progress-bar-striped progress-bar-animated bg-success" role="progressbar"
            aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
        </div>
        <h5 class="mt-3">Memindai...</h5>
      </div>
      <div class="btn-organic">
        <button class="btn btn-secondary back">
          <i class="fa fa-backward mr-2"></i> Kembali
        </button>
        <button class="btn btn-success start">
          <i class="fa fa-sign-in-alt mr-2"></i> Mulai
        </button>

      </div>
      <div class="btn-type">
        <button class="btn btn-secondary back">
          <i class="fa fa-backward mr-2"></i> Kembali
        </button>
        <button class="btn btn-secondary rescan">
          <i class="fa fa-redo mr-2"></i> Pindai Ulang
        </button>
        <button class="btn btn-success recycle">
          <i class="fa fa-recycle mr-2"></i> Daur Ulang
        </button>

      </div>
    </div>
  </div>

  <!-- Option 1: Bootstrap Bundle with Popper -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous">
  </script>

  <!-- JQuery -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"
    integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

  <!-- Sweet Alert JS -->
  <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <!-- Toggle JS -->
  <script src="https://cdn.jsdelivr.net/gh/gitbrent/bootstrap4-toggle@3.6.1/js/bootstrap4-toggle.min.js"></script>

  <!-- Script JS -->
  <script>
    $('.home .start').on('click', () => {
      $('.home').addClass('slide-up')
    })

    $('.trash-type .back').on('click', () => {
      $('.home').removeClass('slide-up')
    })

    $('.trash-type .next').on('click', () => {
      $('.trash-type').addClass('slide-up')
    })
    $('.organic .back').on('click', () => {
      $('.trash-type').removeClass('slide-up')
    })

    let run = false
    let width = 0;
    let id;

    function frame() {
      let random = Math.floor((Math.random() * 4) + 1)
      let type = (random === 1) ? 'Metal' : (random === 2) ? 'Kertas' : (random === 3) ? 'Kaca' : 'Plastik'
      
      $('.organic .img-type').fadeIn()
      $('.organic h2').html('')
      $('.organic .img-type').attr('src',`/img/${type}.png`)

      if (width === 100) {
        run = false
        width = 0
        $('.organic .loader-wrapper').fadeOut()
        $('.organic .progress-bar').css('width', '0%')
        clearInterval(id);

        $('.organic .btn-organic').hide()
        $('.organic .btn-type').show()
        $('.organic h2').html(`Sampah berjenis ${type}`)


        Swal.fire({
          icon: 'success',
          title: 'Berhasil Dipindai...',
          confirmButtonColor: '#198754'
        })
      } else {
        width++;
        $('.organic .progress-bar').css('width', `${width*1.4}%`)
        $('.organic .progress-bar').html(`${width}%`)

      }

    }


    $('.organic .start').on('click', () => {
      run = true
      $('.organic .loader-wrapper').fadeIn()
      id = run ? setInterval(frame, 30) : false
    })

    $('.organic .rescan').on('click', () => {
      run = true
      $('.organic .loader-wrapper').fadeIn()
      id = run ? setInterval(frame, 30) : false

    })

    $('.organic .recycle').on('click', () => {
      run = true
      $('.organic .loader-wrapper').fadeIn()
      id = run ? setInterval(frame, 30) : false

    })
  </script>
</body>

</html>